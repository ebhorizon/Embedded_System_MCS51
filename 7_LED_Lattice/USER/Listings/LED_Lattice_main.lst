C51 COMPILER V9.57.0.0   LED_LATTICE_MAIN                                                  06/12/2020 14:10:43 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE LED_LATTICE_MAIN
OBJECT MODULE PLACED IN ..\OBJ\LED_Lattice_main.obj
COMPILER INVOKED BY: e:\Keil_v5\C51\BIN\C51.EXE LED_Lattice_main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\HARDWARE) DEBUG OB
                    -JECTEXTEND PRINT(.\Listings\LED_Lattice_main.lst) OBJECT(..\OBJ\LED_Lattice_main.obj)

line level    source

   1          #include <reg52.h>
   2          #include "74xx595.h"
   3          
   4          // 定义常用类型
   5          #ifndef u8
              #define u8 unsigned char
              #endif
   8          #ifndef u16
              #define u16 unsigned int
              #endif
  11          
  12          // 行选
  13          u8 code LedRow[]       = {0x01,0x02,0x04,0x08,0x10,0x20,0x40,0x80};
  14          // 列选：中
  15          u8 code LedCol_zhong[] = {0x18,0xFF,0xDB,0xDB,0xFF,0xDB,0x18,0x18};
  16          // 列选：央
  17          u8 code LedCol_yang[]  = {0x18,0x7C,0x5A,0x5A,0xFF,0x38,0x6C,0xC7};
  18          
  19          void Delay(u16 i)
  20          {
  21   1              while(i--);
  22   1      }
  23          
  24          void main()
  25          {       
  26   1              // 规定自下到上，自右到左为自高到低
  27   1              
  28   1              u8 i, j;        // 8位数据循环用
  29   1              u16 stop;       // 视觉停留刷新用
  30   1              u8 temp[2];     // 保存显示数组
  31   1              
  32   1              while(1)
  33   1              {               
  34   2                      // 循环亮灯
  35   2                      for(i = 0; i < 8; i++)
  36   2                      {
  37   3                              for(j = 0; j < 8; j++)
  38   3                              {
  39   4                                      // 这个行选每次都要初始化的
  40   4                                      temp[1] = 0x01 << i;
  41   4                                      temp[0] = ~(~0xFE << j);
  42   4                                      _74XX595_SendByte(2, temp);
  43   4                                      Delay(30000);
  44   4                              }
  45   3                      }
  46   2      
  47   2                      // 显示“中”
  48   2                      for(stop = 100; stop > 0; stop--)
  49   2                      {
  50   3                              for(i = 0; i < 8; i++)
  51   3                              {
  52   4                                      temp[0] = ~LedCol_zhong[i];
  53   4                                      temp[1] = LedRow[i];
  54   4                                      _74XX595_SendByte(2, temp);
C51 COMPILER V9.57.0.0   LED_LATTICE_MAIN                                                  06/12/2020 14:10:43 PAGE 2   

  55   4                                      Delay(10);
  56   4                              }
  57   3                      }
  58   2                      
  59   2                      // 显示“央”
  60   2                      for(stop = 100; stop > 0; stop--)
  61   2                      {
  62   3                              for(i = 0; i < 8; i++)
  63   3                              {
  64   4                                      temp[0] = ~LedCol_yang[i];
  65   4                                      temp[1] = LedRow[i];
  66   4                                      _74XX595_SendByte(2, temp);
  67   4                                      Delay(10);
  68   4                              }
  69   3                      }
  70   2              }
  71   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    233    ----
   CONSTANT SIZE    =     24    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       6
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
